const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-CMN-eAJs.js","assets/swiper-CM9z05WA.js","assets/vendor-hbc7ZpyS.js","assets/vendor-B3lp_-__.css","assets/swiper-D8V4Mzyy.css","assets/ProductCarousel-DMLnLMXs.js","assets/useProductStore-BxtC5TZq.js","assets/pinia-BUsbKMiz.js","assets/sweetalert2-BY1s0Tb6.js","assets/useProductStore-qyhGPBQH.css","assets/Footer-B-IekEGI.js","assets/Footer-7A7DgN2g.css","assets/vue-router-B-VbIHpu.js","assets/axios-DWwaMX5J.js","assets/primevue-DbMZqESr.js","assets/aos-BOscYbde.js","assets/aos-DvB2Xm2x.css","assets/vee-validate-C24gywMW.js","assets/fontawesome-Bt4LmCzt.js","assets/Home-BBWxSI4p.css","assets/bootstrap-DnVUw_vK.css","assets/Products-BHhrPaf_.js","assets/NoData-hDMbA7oi.js","assets/NoData-9git3qCH.css","assets/Breadcrumb-kdOXMUXM.js","assets/Breadcrumb-CGp19ded.css","assets/Product-BlsAZYqt.js","assets/Product-DJi5vxTL.css","assets/Notes-Q9iDW48n.js","assets/Step1-CblvBYvf.js","assets/CheckoutSteps-C_r3muZW.js","assets/CheckoutSteps-l7tcBWc_.css","assets/Step1-DMTnxsxU.css","assets/Step2-DNUdrYlg.js","assets/OrderInfo-HwbQ0CWT.js","assets/OrderInfo-p0u5baBD.css","assets/Step3-yTxzossW.js","assets/PaymentInfo-JDfs87uj.js","assets/PaymentInfo-BVsyDGyM.css","assets/Step4-7NL63gdF.js","assets/Orders-DqEUyXWj.js","assets/Orders-Cug9N5lP.css"])))=>i.map(i=>d[i]);
import{r as u,aS as oe,c as H,z as Y,aV as K,w as N,aa as _,V as l,W as h,ar as d,ae as f,Z as re,ad as V,Q as P,X as y,_ as T,as as se,ag as W,ah as U,ac as ne,aK as ae,aR as ce,af as ie,ao as le,aW as ue,aX as de,aY as me,aZ as pe,a_ as fe,a$ as _e,b0 as ge,b1 as he,b2 as ve,b3 as ye,b4 as Ve,b5 as be}from"./vendor-hbc7ZpyS.js";import{c as we,s as Le,d as A}from"./pinia-BUsbKMiz.js";import{c as Se,a as Ce,u as $e}from"./vue-router-B-VbIHpu.js";import{a as Ee}from"./axios-DWwaMX5J.js";import{u as Oe,P as ke,i as Pe,T as Te,s as Ae,a as Ie,b as De,c as xe,d as Me,e as Be,f as Re,g as qe,h as Fe,j as ze,k as Ne,l as We,m as Ue,n as je,o as Ge,p as He,q as Ye,r as Ke,t as Xe,v as Ze}from"./primevue-DbMZqESr.js";import{S as w}from"./sweetalert2-BY1s0Tb6.js";import{A as Qe}from"./aos-BOscYbde.js";import{d as S,c as Je,l as et,s as tt,F as ot,a as rt,E as st,z as nt,r as at,e as ct,m as it,b as lt,n as ut}from"./vee-validate-C24gywMW.js";import{l as dt,F as mt}from"./fontawesome-Bt4LmCzt.js";/* empty css                  */(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const X=we();X.use(Le);const pt="modulepreload",ft=function(e){return"/glassesShop/"+e},j={},g=function(o,t,a){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=ft(c),c in j)return;j[c]=!0;const v=c.endsWith(".css"),C=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${C}`))return;const m=document.createElement("link");if(m.rel=v?"stylesheet":pt,v||(m.as="script"),m.crossOrigin="",m.href=c,i&&m.setAttribute("nonce",i),document.head.appendChild(m),v)return new Promise((D,x)=>{m.addEventListener("load",D),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return r.then(s=>{for(const i of s||[])i.status==="rejected"&&n(i.reason);return o().catch(n)})},_t=[{path:"/",name:"Home",component:()=>g(()=>import("./Home-CMN-eAJs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))},{path:"/products",name:"Products",component:()=>g(()=>import("./Products-BHhrPaf_.js"),__vite__mapDeps([21,2,3,12,6,7,8,9,22,23,24,25,10,11,13,14,15,16,17,18,20])),props:e=>({event:e.query.event,category:e.query.category})},{path:"/product/:productId",name:"Product",component:()=>g(()=>import("./Product-BlsAZYqt.js"),__vite__mapDeps([26,12,2,3,6,7,8,9,5,1,4,24,25,10,11,13,14,15,16,17,18,27,20]))},{path:"/notes",name:"Notes",component:()=>g(()=>import("./Notes-Q9iDW48n.js"),__vite__mapDeps([28,24,2,3,25,10,11,7,12,13,14,8,15,16,17,18,20]))},{path:"/cart",name:"Step1",component:()=>g(()=>import("./Step1-CblvBYvf.js"),__vite__mapDeps([29,30,2,3,31,10,11,7,8,12,13,14,15,16,17,18,32,20]))},{path:"/order",name:"Step2",component:()=>g(()=>import("./Step2-DNUdrYlg.js"),__vite__mapDeps([33,12,2,3,30,31,34,35,10,11,7,13,14,8,15,16,17,18,20]))},{path:"/order/:orderId",name:"Step3",component:()=>g(()=>import("./Step3-yTxzossW.js"),__vite__mapDeps([36,12,2,3,30,31,34,35,37,7,8,38,10,11,13,14,15,16,17,18,20]))},{path:"/checkout/:orderId",name:"Step4",component:()=>g(()=>import("./Step4-7NL63gdF.js"),__vite__mapDeps([39,12,2,3,30,31,34,35,37,7,8,38,10,11,13,14,15,16,17,18,20]))},{path:"/orders",name:"Orders",component:()=>g(()=>import("./Orders-DqEUyXWj.js"),__vite__mapDeps([40,2,3,12,37,7,8,38,22,23,24,25,10,11,13,14,15,16,17,18,41,20])),props:e=>({status:e.query.status})},{path:"/:catchAll(.*)",redirect:"/"}],Z=Se({history:Ce(),routes:_t,scrollBehavior(e,o,t){return t||{top:0}}});Z.beforeEach((e,o,t)=>{if(!e.meta.requiresAuth)return t()});const gt=A("useTheme",()=>{const e=u(!1);return oe(()=>{e.value?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")}),{isDarkMode:e}},{persist:!0}),G={default:"https://vue-course-api.hexschool.io/api/yunhsi"},ht=(e="default")=>{const o=Ee.create({baseURL:G[e]||G.default,timeout:5e3,headers:{"Content-Type":"application/json"}});return o.interceptors.request.use(t=>{const a=localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t)),o.interceptors.response.use(t=>t,t=>{var n,s;const a=t.response.status,r=((s=(n=t.response)==null?void 0:n.data)==null?void 0:s.message)||"請求失敗";return console.log(t),console.error(`API 錯誤 (狀態碼: ${a}):`,r),Promise.reject(t)}),o},L=ht(),R={async getCarts(){return L.get("/cart").then(e=>e.data.data)},async postCart(e){return L.post("/cart",{data:e}).then(o=>o.data)},async deleteCart(e){return L.delete(`/cart/${e}`).then(o=>o.data)}},F=A("useCommon",()=>{const e=Oe();return{isLoading:u(!1),showMsg:(a,r)=>{e.add({severity:a,summary:"訊息提示",detail:r,life:1e3})}}}),vt=A("useCart",()=>{const e=F(),o=u(),t=async()=>{e.isLoading=!0;try{o.value=await R.getCarts()}catch(n){w.fire({icon:"error",title:`${n.message}`})}finally{e.isLoading=!1}};return{carsData:o,getCarts:t,postCart:async n=>{e.isLoading=!0;try{const s=await R.postCart(n);e.showMsg("success",s.message),await t()}catch(s){w.fire({icon:"error",title:`${s.message}`})}finally{e.isLoading=!1}},deleteCart:async n=>{e.isLoading=!0;try{const s=await R.deleteCart(n);e.showMsg("success",s.message),await t()}catch(s){w.fire({icon:"error",title:`${s.message}`})}finally{e.isLoading=!1}}}}),q={getOrders(e){return L.get(`/orders?page=${e}`).then(o=>o.data)},getOrder(e){return L.get(`/order/${e}`).then(o=>o.data)},createOrder(e){return L.post("/order",{data:e}).then(o=>o.data)}},yt=A("useOrder",()=>{const e=F(),o=u(),t=u(),a=u(),r=async i=>{e.isLoading=!0;try{o.value=await q.getOrders(i)}catch(c){w.fire({icon:"error",title:`${c.message}`})}finally{e.isLoading=!1}};return{ordersData:o,orderData:t,orderId:a,getOrders:r,getOrder:async i=>{e.isLoading=!0;try{const c=await q.getOrder(i);t.value=c.order}catch(c){w.fire({icon:"error",title:`${c.message}`})}finally{e.isLoading=!1}},createOrder:async i=>{e.isLoading=!0;try{const c=await q.createOrder(i);a.value=c.orderId,await r()}catch(c){w.fire({icon:"error",title:`${c.message}`})}finally{e.isLoading=!1}}}}),I=(e,o)=>{const t=e.__vccOpts||e;for(const[a,r]of o)t[a]=r;return t},Vt={class:"d-flex align-items-center gap-2"},bt=["href","onClick"],wt={class:"ml-2"},Lt={key:0,class:"pi pi-sun"},St={key:1,class:"pi pi-moon"},Ct={__name:"NavBar",props:{rootClass:String},setup(e){const o=gt(),t=vt(),a=yt(),r=H(()=>o.isDarkMode?"淺色":"深色"),n=u(null),s=u([{label:"首頁",route:"/"},{label:"商品分類",items:[{label:"全部商品",route:"/products"},{label:"光學眼鏡",route:"/products?category=glasses"},{label:"太陽眼鏡",route:"/products?category=sunglasses"},{separator:!0},{label:"熱門推薦",route:"/products?event=hot"},{label:"優惠活動",route:"/products?event=onsale"}]},{label:"購物說明",route:"/notes"}]),i=u(),c=u([{label:"未完成的訂單",route:"/orders?status=0"},{label:"已完成的訂單",route:"/orders?status=1"},{separator:!0},{label:`切換${r.value}模式`}]),v=u(),C=u();Y(async()=>{window.addEventListener("scroll",m),await t.getCarts(),await a.getOrders(1)}),K(()=>{window.removeEventListener("scroll",m)});const m=()=>{window.scrollY>80?n.value.classList.add("scrolled"):n.value.classList.remove("scrolled"),i.value.target&&document.querySelector(".otherMenusBtn").click()};N(t,()=>{v.value=t.carsData.carts.length}),N(a,()=>{C.value=a.ordersData.orders.filter(E=>!E.is_paid).length});const D=E=>{i.value.toggle(E)},x=()=>{setTimeout(()=>{o.isDarkMode=!o.isDarkMode},100)};return(E,z)=>{const O=_("router-link"),M=_("VButton"),Q=_("VOverlayBadge"),J=_("VBadge"),ee=_("VMenu"),te=_("VMenubar");return l(),h("nav",{ref_key:"navDom",ref:n,class:W(["fixed-top py-1",e.rootClass])},[d(te,{model:s.value,class:"container"},{start:f(()=>[d(O,{to:"/",class:"navbar-brand"},{default:f(()=>z[0]||(z[0]=[re("!wear")])),_:1})]),item:f(({item:p,props:$,hasSubmenu:B,root:k})=>[p.route?(l(),V(O,P({key:0,to:p.route,class:"d-flex align-items-center"},$.action),{default:f(()=>[y("span",null,T(p.label),1)]),_:2},1040,["to"])):(l(),h("a",se(P({key:1},$.action)),[y("span",null,T(p.label),1),B?(l(),h("i",{key:0,class:W(["pi pi-angle-down ml-auto",{"pi-angle-down":k,"pi-angle-right":!k}])},null,2)):U("",!0)],16))]),end:f(()=>[y("div",Vt,[d(O,{to:"/cart",prefetch:""},{default:f(()=>[v.value?(l(),V(Q,{key:0,severity:"danger"},{default:f(()=>[d(M,{type:"button",icon:"pi pi-shopping-cart",severity:"contrast",variant:"text",rounded:""})]),_:1})):(l(),V(M,{key:1,type:"button",icon:"pi pi-shopping-cart",severity:"contrast",variant:"text",rounded:""}))]),_:1}),d(M,{type:"button",icon:"pi pi-ellipsis-v","aria-haspopup":"true","aria-controls":"overlay_menu",severity:"contrast",variant:"text",rounded:"",class:"otherMenusBtn",onClick:D}),d(ee,{id:"overlay_menu",ref_key:"otherMenusDom",ref:i,model:c.value,popup:!0},{item:f(({item:p,props:$})=>[p.route?(l(),V(O,{key:0,to:p.route,custom:"",prefetch:""},{default:f(({href:B,navigate:k})=>[y("a",P({href:B},$.action,{onClick:k}),[y("span",wt,T(p.label),1),C.value&&p.label=="未完成的訂單"?(l(),V(J,{key:0,value:C.value,severity:"danger",size:"small"},null,8,["value"])):U("",!0)],16,bt)]),_:2},1032,["to"])):(l(),h("a",P({key:1},$.action,{onClick:x}),[y("span",null,T(p.label),1),r.value=="淺色"?(l(),h("i",Lt)):(l(),h("i",St))],16))]),_:1},8,["model"])])]),_:1},8,["model"])],2)}}},$t=I(Ct,[["__scopeId","data-v-ae775e91"]]),Et={__name:"GoTop",setup(e){const o=u(null);Y(()=>{o.value=document.querySelector(".go-top"),window.addEventListener("scroll",t)}),K(()=>{window.removeEventListener("scroll",t)});const t=()=>{window.scrollY>200?o.value.classList.add("scrolled"):o.value.classList.remove("scrolled")},a=()=>{window.scrollTo(0,0)};return(r,n)=>{const s=_("VIcon");return l(),h("div",{class:"go-top text-secondary hvr-sink",onClick:a},[d(s,{icon:["fas","angle-up"],class:"text-center"}),n[0]||(n[0]=y("small",null,"TOP",-1))])}}},Ot=I(Et,[["__scopeId","data-v-c9161d16"]]),kt={},Pt={class:"spinWrapper"};function Tt(e,o){const t=_("VProgressSpinner");return l(),h("div",Pt,[d(t,{fill:"transparent","animation-duration":".5s"})])}const At=I(kt,[["render",Tt],["__scopeId","data-v-84eabaa5"]]),It={};function Dt(e,o){const t=_("VToast");return l(),V(t,{breakpoints:{"414px":{width:"100%",right:"0",left:"0"}}})}const xt=I(It,[["render",Dt]]),Mt={__name:"App",setup(e){const o=F(),t=$e(),a=H(()=>t.path==="/"?"":"border-bottom");return(r,n)=>{const s=$t,i=_("router-view");return l(),h(le,null,[ne(d(At,null,null,512),[[ae,ce(o).isLoading]]),d(xt),d(s,{"root-class":a.value},null,8,["root-class"]),d(i,null,{default:f(({Component:c})=>[(l(),V(ie(c)))]),_:1}),d(Ot)],64)}}};function Bt(){Qe.init({once:!1})}function Rt(e){e.use(ke,{theme:{preset:Pe,options:{darkModeSelector:".dark-mode"}}}),e.use(Te),e.component("VButton",Ae),e.component("VMenubar",Ie),e.component("VOverlayBadge",De),e.component("VBadge",xe),e.component("VMenu",Me),e.component("VCard",Be),e.component("VTag",Re),e.component("VProgressSpinner",qe),e.component("VToast",Fe),e.component("VInputText",ze),e.component("VInputNumber",Ne),e.component("VInputGroup",We),e.component("VInputGroupAddon",Ue),e.component("VSelect",je),e.component("VBreadcrumb",Ge),e.component("VFloatLabel",He),e.component("VAccordion",Ye),e.component("VAccordionPanel",Ke),e.component("VAccordionHeader",Xe),e.component("VAccordionContent",Ze)}S("required",at);S("email",ct);S("min",it);S("max",lt);S("numeric",ut);S("onlyChinese",e=>/^[\u4e00-\u9fa5]+$/.test(e)?!0:"請輸入中文");Je({generateMessage:et({zh_TW:nt}),validateOnInput:!0});tt("zh_TW");function qt(e){e.component("VField",ot),e.component("VForm",rt),e.component("ErrorMessage",st)}dt.add(ue,de,me,pe,fe,_e,ge,he,ve,ye);function Ft(e){e.component("VIcon",mt)}const b=Ve(Mt),zt=be();b.use(X);b.use(Z);b.use(zt);Bt();Rt(b);qt(b);Ft(b);b.mount("#app");export{I as _,L as a,F as b,gt as c,yt as d,vt as u};
