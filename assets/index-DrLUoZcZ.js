const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-UyWh6XnE.js","assets/vendor-CeIIztvN.js","assets/vendor-CpyXZHaA.css","assets/ProductCarousel-kfe8qKPk.js","assets/useProductStore-DIBQQ6sn.js","assets/pinia-f5aTiCRI.js","assets/useProductStore-qyhGPBQH.css","assets/axios-DWwaMX5J.js","assets/primevue-Bzk5oe3L.js","assets/vee-validate-DTWiMbKr.js","assets/Home-DfEk_O9Z.css","assets/Products-D0armC0W.js","assets/NoData-DzATwRWC.js","assets/NoData-9git3qCH.css","assets/Breadcrumb-C6s0ZYuy.js","assets/Breadcrumb-CgL3dDJU.css","assets/Product-8vN7XGn2.js","assets/Product-CkApXYj7.css","assets/Notes-ULL2hHBX.js","assets/Step1-DSTR70Sg.js","assets/CheckoutSteps-CvxxgUDE.js","assets/CheckoutSteps-l7tcBWc_.css","assets/Step1-CwoHeaLf.css","assets/Step2-BeJlQAgU.js","assets/OrderInfo-CJeGTnD9.js","assets/OrderInfo-Cb_GZHuF.css","assets/Step3-BgbZQDyf.js","assets/PaymentInfo-BnbeEvwY.js","assets/PaymentInfo-BVsyDGyM.css","assets/Step4-Djx5oAhe.js","assets/Orders-Gl77DsZT.js","assets/Orders-D8Ca1b3z.css"])))=>i.map(i=>d[i]);
import{aS as re,aT as ne,r as p,aQ as ae,aU as w,f as Y,x as X,aV as K,w as z,a8 as m,T as d,U as h,ap as u,ac as _,X as S,ab as b,O as P,V as i,Y as x,aq as ce,ae as U,af as W,aW as ie,aa as le,aI as ue,aN as de,ad as me,am as pe,aX as fe,aY as _e,aZ as ge,a_ as he,a$ as ve,b0 as ye,b1 as be,b2 as Ve,b3 as we,b4 as Le,b5 as $e,b6 as ke,b7 as Ce,b8 as Se,b9 as Oe}from"./vendor-CeIIztvN.js";import{c as Ee,s as Ie,d as A}from"./pinia-f5aTiCRI.js";import{a as Te}from"./axios-DWwaMX5J.js";import{u as Pe,P as xe,i as Ae,T as De,s as Me,a as Be,b as Re,c as qe,d as Fe,e as je,f as Ne,g as ze,h as Ue,j as We,k as Ge,l as He,m as Ye,n as Xe,o as Ke,p as Qe,q as Ze,r as Je,t as et,v as tt}from"./primevue-Bzk5oe3L.js";import{d as $,c as ot,l as st,s as rt,F as nt,a as at,E as ct,z as it,r as lt,e as ut,m as dt,b as mt,n as pt}from"./vee-validate-DTWiMbKr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const Q=Ee();Q.use(Ie);const ft="modulepreload",_t=function(e){return"/glassesShop/"+e},G={},v=function(t,o,a){let s=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),c=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(o.map(l=>{if(l=_t(l),l in G)return;G[l]=!0;const y=l.endsWith(".css"),k=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${k}`))return;const f=document.createElement("link");if(f.rel=y?"stylesheet":ft,y||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),y)return new Promise((D,M)=>{f.addEventListener("load",D),f.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return s.then(r=>{for(const c of r||[])c.status==="rejected"&&n(c.reason);return t().catch(n)})},gt=[{path:"/",name:"Home",component:()=>v(()=>import("./Home-UyWh6XnE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))},{path:"/products",name:"Products",component:()=>v(()=>import("./Products-D0armC0W.js"),__vite__mapDeps([11,1,2,4,5,6,12,13,14,15,7,8,9])),props:e=>({event:e.query.event,category:e.query.category})},{path:"/product/:productId",name:"Product",component:()=>v(()=>import("./Product-8vN7XGn2.js"),__vite__mapDeps([16,1,2,4,5,6,3,14,15,7,8,9,17]))},{path:"/notes",name:"Notes",component:()=>v(()=>import("./Notes-ULL2hHBX.js"),__vite__mapDeps([18,14,1,2,15,5,7,8,9]))},{path:"/cart",name:"Step1",component:()=>v(()=>import("./Step1-DSTR70Sg.js"),__vite__mapDeps([19,20,1,2,21,5,7,8,9,22]))},{path:"/order",name:"Step2",component:()=>v(()=>import("./Step2-BeJlQAgU.js"),__vite__mapDeps([23,1,2,20,21,24,25,5,7,8,9]))},{path:"/order/:orderId",name:"Step3",component:()=>v(()=>import("./Step3-BgbZQDyf.js"),__vite__mapDeps([26,1,2,20,21,24,25,27,5,28,7,8,9]))},{path:"/checkout/:orderId",name:"Step4",component:()=>v(()=>import("./Step4-Djx5oAhe.js"),__vite__mapDeps([29,1,2,20,21,24,25,27,5,28,7,8,9]))},{path:"/orders",name:"Orders",component:()=>v(()=>import("./Orders-Gl77DsZT.js"),__vite__mapDeps([30,1,2,27,5,28,12,13,14,15,7,8,9,31])),props:e=>({status:e.query.status})},{path:"/:catchAll(.*)",redirect:"/"}],Z=re({history:ne(),routes:gt,scrollBehavior(e,t,o){return o||{top:0}}});Z.beforeEach((e,t,o)=>{if(!e.meta.requiresAuth)return o()});const ht=A("useTheme",()=>{const e=p(!1);return ae(()=>{e.value?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")}),{isDarkMode:e}},{persist:!0}),H={default:"https://vue-course-api.hexschool.io/api/yunhsi"},vt=(e="default")=>{const t=Te.create({baseURL:H[e]||H.default,timeout:5e3,headers:{"Content-Type":"application/json"}});return t.interceptors.request.use(o=>{const a=localStorage.getItem("token");return a&&(o.headers.Authorization=`Bearer ${a}`),o},o=>Promise.reject(o)),t.interceptors.response.use(o=>o,o=>{var n,r;const a=o.response.status,s=((r=(n=o.response)==null?void 0:n.data)==null?void 0:r.message)||"請求失敗";return console.log(o),console.error(`API 錯誤 (狀態碼: ${a}):`,s),Promise.reject(o)}),t},L=vt(),q={async getCarts(){return L.get("/cart").then(e=>e.data.data)},async postCart(e){return L.post("/cart",{data:e}).then(t=>t.data)},async deleteCart(e){return L.delete(`/cart/${e}`).then(t=>t.data)}},j=A("useCommon",()=>{const e=Pe();return{isLoading:p(!1),showMsg:(a,s)=>{e.add({severity:a,summary:"訊息提示",detail:s,life:1e3})}}}),yt=A("useCart",()=>{const e=j(),t=p(),o=async()=>{e.isLoading=!0;try{t.value=await q.getCarts()}catch(n){w.fire({icon:"error",title:`${n.message}`})}finally{e.isLoading=!1}};return{carsData:t,getCarts:o,postCart:async n=>{e.isLoading=!0;try{const r=await q.postCart(n);e.showMsg("success",r.message),await o()}catch(r){w.fire({icon:"error",title:`${r.message}`})}finally{e.isLoading=!1}},deleteCart:async n=>{e.isLoading=!0;try{const r=await q.deleteCart(n);e.showMsg("success",r.message),await o()}catch(r){w.fire({icon:"error",title:`${r.message}`})}finally{e.isLoading=!1}}}}),F={getOrders(e){return L.get(`/orders?page=${e}`).then(t=>t.data)},getOrder(e){return L.get(`/order/${e}`).then(t=>t.data)},createOrder(e){return L.post("/order",{data:e}).then(t=>t.data)}},bt=A("useOrder",()=>{const e=j(),t=p(),o=p(),a=p(),s=async c=>{e.isLoading=!0;try{t.value=await F.getOrders(c)}catch(l){w.fire({icon:"error",title:`${l.message}`})}finally{e.isLoading=!1}};return{ordersData:t,orderData:o,orderId:a,getOrders:s,getOrder:async c=>{e.isLoading=!0;try{const l=await F.getOrder(c);o.value=l.order}catch(l){w.fire({icon:"error",title:`${l.message}`})}finally{e.isLoading=!1}},createOrder:async c=>{e.isLoading=!0;try{const l=await F.createOrder(c);a.value=l.orderId,await s()}catch(l){w.fire({icon:"error",title:`${l.message}`})}finally{e.isLoading=!1}}}}),O=(e,t)=>{const o=e.__vccOpts||e;for(const[a,s]of t)o[a]=s;return o},Vt={class:"d-flex align-items-center gap-2"},wt=["href","onClick"],Lt={class:"ml-2"},$t={key:0,class:"pi pi-sun"},kt={key:1,class:"pi pi-moon"},Ct={__name:"NavBar",props:{rootClass:String},setup(e){const t=ht(),o=yt(),a=bt(),s=Y(()=>t.isDarkMode?"淺色":"深色"),n=p(null),r=p([{label:"首頁",route:"/"},{label:"商品分類",items:[{label:"全部商品",route:"/products"},{label:"光學眼鏡",route:"/products?category=glasses"},{label:"太陽眼鏡",route:"/products?category=sunglasses"},{separator:!0},{label:"熱門推薦",route:"/products?event=hot"},{label:"優惠活動",route:"/products?event=onsale"}]},{label:"購物說明",route:"/notes"}]),c=p(),l=p([{label:"未完成的訂單",route:"/orders?status=0"},{label:"已完成的訂單",route:"/orders?status=1"},{separator:!0},{label:`切換${s.value}模式`}]),y=p(),k=p();X(()=>{window.addEventListener("scroll",f),o.getCarts(),a.getOrders(1)}),K(()=>{window.removeEventListener("scroll",f)});const f=()=>{window.scrollY>80?n.value.classList.add("scrolled"):n.value.classList.remove("scrolled"),c.value.target&&document.querySelector(".otherMenusBtn").click()};z(o,()=>{y.value=o.carsData.carts.length}),z(a,()=>{k.value=a.ordersData.orders.filter(E=>!E.is_paid).length});const D=E=>{c.value.toggle(E)},M=()=>{setTimeout(()=>{t.isDarkMode=!t.isDarkMode},100)};return(E,N)=>{const J=m("VIcon"),I=m("router-link"),B=m("VButton"),ee=m("VOverlayBadge"),te=m("VBadge"),oe=m("VMenu"),se=m("VMenubar");return d(),h("nav",{ref_key:"navDom",ref:n,class:U(["fixed-top",e.rootClass])},[u(se,{model:r.value,class:"container"},{start:_(()=>[u(I,{to:"/",class:"navbar-brand",prefetch:""},{default:_(()=>[u(J,{icon:["fas","glasses"]}),N[0]||(N[0]=S(" !wear "))]),_:1})]),item:_(({item:g,props:C,hasSubmenu:R,root:T})=>[g.route?(d(),b(I,P({key:0,to:g.route,class:"d-flex align-items-center"},C.action,{prefetch:""}),{default:_(()=>[i("span",null,x(g.label),1)]),_:2},1040,["to"])):(d(),h("a",ce(P({key:1},C.action)),[i("span",null,x(g.label),1),R?(d(),h("i",{key:0,class:U(["pi pi-angle-down ml-auto",{"pi-angle-down":T,"pi-angle-right":!T}])},null,2)):W("",!0)],16))]),end:_(()=>[i("div",Vt,[u(I,{to:"/cart",prefetch:""},{default:_(()=>[y.value?(d(),b(ee,{key:0,severity:"danger"},{default:_(()=>[u(B,{type:"button",icon:"pi pi-shopping-cart",severity:"contrast",variant:"text",rounded:""})]),_:1})):(d(),b(B,{key:1,type:"button",icon:"pi pi-shopping-cart",severity:"contrast",variant:"text",rounded:""}))]),_:1}),u(B,{type:"button",icon:"pi pi-ellipsis-v","aria-haspopup":"true","aria-controls":"overlay_menu",severity:"contrast",variant:"text",rounded:"",class:"otherMenusBtn",onClick:D}),u(oe,{id:"overlay_menu",ref_key:"otherMenusDom",ref:c,model:l.value,popup:!0},{item:_(({item:g,props:C})=>[g.route?(d(),b(I,{key:0,to:g.route,custom:"",prefetch:""},{default:_(({href:R,navigate:T})=>[i("a",P({href:R},C.action,{onClick:T}),[i("span",Lt,x(g.label),1),k.value&&g.label=="未完成的訂單"?(d(),b(te,{key:0,value:k.value,severity:"danger",size:"small"},null,8,["value"])):W("",!0)],16,wt)]),_:2},1032,["to"])):(d(),h("a",P({key:1},C.action,{onClick:M}),[i("span",null,x(g.label),1),s.value=="淺色"?(d(),h("i",$t)):(d(),h("i",kt))],16))]),_:1},8,["model"])])]),_:1},8,["model"])],2)}}},St=O(Ct,[["__scopeId","data-v-44e0a84e"]]),Ot={},Et={class:"bg-dark"},It={class:"container py-3"},Tt={class:"m-0 copyright text-center"},Pt={class:"d-flex justify-content-center list-unstyled m-0"},xt={href:"javascript:;",target:"_blank",class:"px-2"},At={href:"javascript:;",target:"_blank",class:"px-2"},Dt={href:"javascript:;",target:"_blank",class:"px-2"},Mt={href:"javascript:;",target:"_blank",class:"px-2"};function Bt(e,t){const o=m("router-link"),a=m("VIcon");return d(),h("footer",Et,[i("div",It,[i("p",Tt,[t[1]||(t[1]=S(" © 2025 ")),u(o,{to:"/",prefetch:""},{default:_(()=>t[0]||(t[0]=[S("!wear")])),_:1}),t[2]||(t[2]=S(" All Rights Reserved ")),t[3]||(t[3]=i("br",null,null,-1)),t[4]||(t[4]=i("small",{class:"d-block py-1"},[S(" 僅做為練習使用，非商業用途. ｜ "),i("a",{href:"https://yunhsi.github.io/iwearCLI/#/admin/login",class:"small",target:"_blank"}," 登入後台 ")],-1))]),i("ul",Pt,[i("li",null,[i("a",xt,[u(a,{icon:["fab","square-facebook"]})])]),i("li",null,[i("a",At,[u(a,{icon:["fab","square-instagram"]})])]),i("li",null,[i("a",Dt,[u(a,{icon:["fab","square-threads"]})])]),i("li",null,[i("a",Mt,[u(a,{icon:["fab","line"]})])])])])])}const Rt=O(Ot,[["render",Bt],["__scopeId","data-v-6893c243"]]),qt={__name:"GoTop",setup(e){const t=p(null);X(()=>{t.value=document.querySelector(".go-top"),window.addEventListener("scroll",o)}),K(()=>{window.removeEventListener("scroll",o)});const o=()=>{window.scrollY>200?t.value.classList.add("scrolled"):t.value.classList.remove("scrolled")},a=()=>{window.scrollTo(0,0)};return(s,n)=>{const r=m("VIcon");return d(),h("div",{class:"go-top text-secondary hvr-sink",onClick:a},[u(r,{icon:["fas","angle-up"],class:"text-center"}),n[0]||(n[0]=i("small",null,"TOP",-1))])}}},Ft=O(qt,[["__scopeId","data-v-c9161d16"]]),jt={},Nt={class:"spinWrapper"};function zt(e,t){const o=m("VProgressSpinner");return d(),h("div",Nt,[u(o,{fill:"transparent","animation-duration":".5s"})])}const Ut=O(jt,[["render",zt],["__scopeId","data-v-84eabaa5"]]),Wt={};function Gt(e,t){const o=m("VToast");return d(),b(o,{breakpoints:{"414px":{width:"100%",right:"0",left:"0"}}})}const Ht=O(Wt,[["render",Gt]]),Yt={__name:"App",setup(e){const t=j(),o=ie(),a=Y(()=>o.path==="/"?"":"border-bottom");return(s,n)=>{const r=m("router-view");return d(),h(pe,null,[le(u(Ut,null,null,512),[[ue,de(t).isLoading]]),u(Ht),u(St,{"root-class":a.value},null,8,["root-class"]),u(r,null,{default:_(({Component:c})=>[(d(),b(me(c)))]),_:1}),u(Rt),u(Ft)],64)}}};function Xt(){fe.init({once:!1})}function Kt(e){e.use(xe,{theme:{preset:Ae,options:{darkModeSelector:".dark-mode"}}}),e.use(De),e.component("VButton",Me),e.component("VMenubar",Be),e.component("VOverlayBadge",Re),e.component("VBadge",qe),e.component("VMenu",Fe),e.component("VCard",je),e.component("VTag",Ne),e.component("VProgressSpinner",ze),e.component("VToast",Ue),e.component("VInputText",We),e.component("VInputNumber",Ge),e.component("VInputGroup",He),e.component("VInputGroupAddon",Ye),e.component("VSelect",Xe),e.component("VBreadcrumb",Ke),e.component("VFloatLabel",Qe),e.component("VAccordion",Ze),e.component("VAccordionPanel",Je),e.component("VAccordionHeader",et),e.component("VAccordionContent",tt)}$("required",lt);$("email",ut);$("min",dt);$("max",mt);$("numeric",pt);$("onlyChinese",e=>/^[\u4e00-\u9fa5]+$/.test(e)?!0:"請輸入中文");ot({generateMessage:st({zh_TW:it}),validateOnInput:!0});rt("zh_TW");function Qt(e){e.component("VField",nt),e.component("VForm",at),e.component("ErrorMessage",ct)}_e.add(ge,he,ve,ye,be,Ve,we,Le,$e,ke);function Zt(e){e.component("VIcon",Ce)}const V=Se(Yt),Jt=Oe();V.use(Q);V.use(Z);V.use(Jt);Xt();Kt(V);Qt(V);Zt(V);V.mount("#app");export{O as _,L as a,j as b,ht as c,bt as d,yt as u};
