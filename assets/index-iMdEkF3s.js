const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DVzUToFt.js","assets/swiper-Dgzl5xLV.js","assets/vendor-B41E6fCd.js","assets/vendor-B3lp_-__.css","assets/swiper-D8V4Mzyy.css","assets/ProductCarousel-DYsF3_1v.js","assets/useProductStore-BJjdDFR1.js","assets/pinia-BkvZVVYd.js","assets/sweetalert2-BY1s0Tb6.js","assets/useProductStore-qyhGPBQH.css","assets/Footer-B1uIpLyl.js","assets/Footer-7A7DgN2g.css","assets/vue-router-CBWtc_xm.js","assets/axios-DWwaMX5J.js","assets/primevue-CFhGeXvP.js","assets/aos-BOscYbde.js","assets/aos-DvB2Xm2x.css","assets/vee-validate-Cb4b_jUY.js","assets/fontawesome-_oGGVkH_.js","assets/bootstrap-TFU0-Fi5.js","assets/bootstrap-DnVUw_vK.css","assets/Home-BBWxSI4p.css","assets/Products-DXJR_lsT.js","assets/NoData-BUpihgCM.js","assets/NoData-9git3qCH.css","assets/Breadcrumb-Bo8eCsSc.js","assets/Breadcrumb-CGp19ded.css","assets/Product-Z746PEfr.js","assets/Product-DJi5vxTL.css","assets/Notes-BPudPiIm.js","assets/Step1-CQtQjDAz.js","assets/CheckoutSteps-BeDcuVDr.js","assets/CheckoutSteps-l7tcBWc_.css","assets/Step1-DMTnxsxU.css","assets/Step2-DMlS7pn6.js","assets/OrderInfo-BlbIE9Pn.js","assets/OrderInfo-p0u5baBD.css","assets/Step3-Cf1ES53G.js","assets/PaymentInfo-C87fTKpg.js","assets/PaymentInfo-BVsyDGyM.css","assets/Step4-DCkKRXn0.js","assets/Orders-CWY4yim4.js","assets/Orders-Cug9N5lP.css"])))=>i.map(i=>d[i]);
import{r as u,aU as oe,a as H,A as Y,aX as X,w as z,ac as _,X as l,Y as h,at as d,ag as f,$ as re,af as V,S as P,Z as y,a0 as T,au as se,ai as U,aj as j,ae as ne,aM as ae,aT as ce,ah as ie,aq as le,aY as ue,aZ as de,a_ as me,a$ as pe,b0 as fe,b1 as _e,b2 as ge,b3 as he,b4 as ve,b5 as ye,b6 as Ve,b7 as be}from"./vendor-B41E6fCd.js";import{c as we,s as Le,d as A}from"./pinia-BkvZVVYd.js";import{c as Se,a as $e,u as Ce}from"./vue-router-CBWtc_xm.js";import{a as Ee}from"./axios-DWwaMX5J.js";import{u as Oe,P as ke,i as Pe,T as Te,s as Ae,a as Ie,b as De,c as xe,d as Me,e as Be,f as Re,g as qe,h as Fe,j as Ne,k as ze,l as Ue,m as je,n as Ge,o as We,p as He,q as Ye,r as Xe,t as Ze,v as Ke}from"./primevue-CFhGeXvP.js";import{S as w}from"./sweetalert2-BY1s0Tb6.js";import{A as Je}from"./aos-BOscYbde.js";import{d as S,c as Qe,l as et,s as tt,F as ot,a as rt,E as st,z as nt,r as at,e as ct,m as it,b as lt,n as ut}from"./vee-validate-Cb4b_jUY.js";import{l as dt,F as mt}from"./fontawesome-_oGGVkH_.js";import"./bootstrap-TFU0-Fi5.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const Z=we();Z.use(Le);const pt="modulepreload",ft=function(e){return"/glassesShop/"+e},G={},g=function(o,t,a){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=ft(c),c in G)return;G[c]=!0;const v=c.endsWith(".css"),$=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${$}`))return;const m=document.createElement("link");if(m.rel=v?"stylesheet":pt,v||(m.as="script"),m.crossOrigin="",m.href=c,i&&m.setAttribute("nonce",i),document.head.appendChild(m),v)return new Promise((D,x)=>{m.addEventListener("load",D),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return r.then(s=>{for(const i of s||[])i.status==="rejected"&&n(i.reason);return o().catch(n)})},_t=[{path:"/",name:"Home",component:()=>g(()=>import("./Home-DVzUToFt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))},{path:"/products",name:"Products",component:()=>g(()=>import("./Products-DXJR_lsT.js"),__vite__mapDeps([22,2,3,12,6,7,8,9,23,24,25,26,10,11,13,14,15,16,17,18,19,20])),props:e=>({event:e.query.event,category:e.query.category})},{path:"/product/:productId",name:"Product",component:()=>g(()=>import("./Product-Z746PEfr.js"),__vite__mapDeps([27,12,2,3,6,7,8,9,5,1,4,25,26,10,11,13,14,15,16,17,18,19,20,28]))},{path:"/notes",name:"Notes",component:()=>g(()=>import("./Notes-BPudPiIm.js"),__vite__mapDeps([29,25,2,3,26,10,11,7,12,13,14,8,15,16,17,18,19,20]))},{path:"/cart",name:"Step1",component:()=>g(()=>import("./Step1-CQtQjDAz.js"),__vite__mapDeps([30,31,2,3,32,10,11,7,8,12,13,14,15,16,17,18,19,20,33]))},{path:"/order",name:"Step2",component:()=>g(()=>import("./Step2-DMlS7pn6.js"),__vite__mapDeps([34,12,2,3,31,32,35,36,10,11,7,13,14,8,15,16,17,18,19,20]))},{path:"/order/:orderId",name:"Step3",component:()=>g(()=>import("./Step3-Cf1ES53G.js"),__vite__mapDeps([37,12,2,3,31,32,35,36,38,7,8,39,10,11,13,14,15,16,17,18,19,20]))},{path:"/checkout/:orderId",name:"Step4",component:()=>g(()=>import("./Step4-DCkKRXn0.js"),__vite__mapDeps([40,12,2,3,31,32,35,36,38,7,8,39,10,11,13,14,15,16,17,18,19,20]))},{path:"/orders",name:"Orders",component:()=>g(()=>import("./Orders-CWY4yim4.js"),__vite__mapDeps([41,2,3,12,38,7,8,39,23,24,25,26,10,11,13,14,15,16,17,18,19,20,42])),props:e=>({status:e.query.status})},{path:"/:catchAll(.*)",redirect:"/"}],K=Se({history:$e(),routes:_t,scrollBehavior(e,o,t){return t||{top:0}}});K.beforeEach((e,o,t)=>{if(!e.meta.requiresAuth)return t()});const gt=A("useTheme",()=>{const e=u(!1);return oe(()=>{e.value?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode")}),{isDarkMode:e}},{persist:!0}),W={default:"https://vue-course-api.hexschool.io/api/yunhsi"},ht=(e="default")=>{const o=Ee.create({baseURL:W[e]||W.default,timeout:5e3,headers:{"Content-Type":"application/json"}});return o.interceptors.request.use(t=>{const a=localStorage.getItem("token");return a&&(t.headers.Authorization=`Bearer ${a}`),t},t=>Promise.reject(t)),o.interceptors.response.use(t=>t,t=>{var n,s;const a=t.response.status,r=((s=(n=t.response)==null?void 0:n.data)==null?void 0:s.message)||"請求失敗";return console.log(t),console.error(`API 錯誤 (狀態碼: ${a}):`,r),Promise.reject(t)}),o},L=ht(),R={async getCarts(){return L.get("/cart").then(e=>e.data.data)},async postCart(e){return L.post("/cart",{data:e}).then(o=>o.data)},async deleteCart(e){return L.delete(`/cart/${e}`).then(o=>o.data)}},F=A("useCommon",()=>{const e=Oe();return{isLoading:u(!1),showMsg:(a,r)=>{e.add({severity:a,summary:"訊息提示",detail:r,life:1e3})}}}),vt=A("useCart",()=>{const e=F(),o=u(),t=async()=>{e.isLoading=!0;try{o.value=await R.getCarts()}catch(n){w.fire({icon:"error",title:`${n.message}`})}finally{e.isLoading=!1}};return{carsData:o,getCarts:t,postCart:async n=>{e.isLoading=!0;try{const s=await R.postCart(n);e.showMsg("success",s.message),await t()}catch(s){w.fire({icon:"error",title:`${s.message}`})}finally{e.isLoading=!1}},deleteCart:async n=>{e.isLoading=!0;try{const s=await R.deleteCart(n);e.showMsg("success",s.message),await t()}catch(s){w.fire({icon:"error",title:`${s.message}`})}finally{e.isLoading=!1}}}}),q={getOrders(e){return L.get(`/orders?page=${e}`).then(o=>o.data)},getOrder(e){return L.get(`/order/${e}`).then(o=>o.data)},createOrder(e){return L.post("/order",{data:e}).then(o=>o.data)}},yt=A("useOrder",()=>{const e=F(),o=u(),t=u(),a=u(),r=async i=>{e.isLoading=!0;try{o.value=await q.getOrders(i)}catch(c){w.fire({icon:"error",title:`${c.message}`})}finally{e.isLoading=!1}};return{ordersData:o,orderData:t,orderId:a,getOrders:r,getOrder:async i=>{e.isLoading=!0;try{const c=await q.getOrder(i);t.value=c.order}catch(c){w.fire({icon:"error",title:`${c.message}`})}finally{e.isLoading=!1}},createOrder:async i=>{e.isLoading=!0;try{const c=await q.createOrder(i);a.value=c.orderId,await r()}catch(c){w.fire({icon:"error",title:`${c.message}`})}finally{e.isLoading=!1}}}}),I=(e,o)=>{const t=e.__vccOpts||e;for(const[a,r]of o)t[a]=r;return t},Vt={class:"d-flex align-items-center gap-2"},bt=["href","onClick"],wt={class:"ml-2"},Lt={key:0,class:"pi pi-sun"},St={key:1,class:"pi pi-moon"},$t={__name:"NavBar",props:{rootClass:String},setup(e){const o=gt(),t=vt(),a=yt(),r=H(()=>o.isDarkMode?"淺色":"深色"),n=u(null),s=u([{label:"首頁",route:"/"},{label:"商品分類",items:[{label:"全部商品",route:"/products"},{label:"光學眼鏡",route:"/products?category=glasses"},{label:"太陽眼鏡",route:"/products?category=sunglasses"},{separator:!0},{label:"熱門推薦",route:"/products?event=hot"},{label:"優惠活動",route:"/products?event=onsale"}]},{label:"購物說明",route:"/notes"}]),i=u(),c=u([{label:"未完成的訂單",route:"/orders?status=0"},{label:"已完成的訂單",route:"/orders?status=1"},{separator:!0},{label:`切換${r.value}模式`}]),v=u(),$=u();Y(async()=>{window.addEventListener("scroll",m),await t.getCarts(),await a.getOrders(1)}),X(()=>{window.removeEventListener("scroll",m)});const m=()=>{window.scrollY>80?n.value.classList.add("scrolled"):n.value.classList.remove("scrolled"),i.value.target&&document.querySelector(".otherMenusBtn").click()};z(t,()=>{v.value=t.carsData.carts.length}),z(a,()=>{$.value=a.ordersData.orders.filter(E=>!E.is_paid).length});const D=E=>{i.value.toggle(E)},x=()=>{setTimeout(()=>{o.isDarkMode=!o.isDarkMode},100)};return(E,N)=>{const O=_("router-link"),M=_("VButton"),J=_("VOverlayBadge"),Q=_("VBadge"),ee=_("VMenu"),te=_("VMenubar");return l(),h("nav",{ref_key:"navDom",ref:n,class:U(["fixed-top py-1",e.rootClass])},[d(te,{model:s.value,class:"container"},{start:f(()=>[d(O,{to:"/",class:"navbar-brand"},{default:f(()=>N[0]||(N[0]=[re("!wear")])),_:1})]),item:f(({item:p,props:C,hasSubmenu:B,root:k})=>[p.route?(l(),V(O,P({key:0,to:p.route,class:"d-flex align-items-center"},C.action),{default:f(()=>[y("span",null,T(p.label),1)]),_:2},1040,["to"])):(l(),h("a",se(P({key:1},C.action)),[y("span",null,T(p.label),1),B?(l(),h("i",{key:0,class:U(["pi pi-angle-down ml-auto",{"pi-angle-down":k,"pi-angle-right":!k}])},null,2)):j("",!0)],16))]),end:f(()=>[y("div",Vt,[d(O,{to:"/cart",prefetch:""},{default:f(()=>[v.value?(l(),V(J,{key:0,severity:"danger"},{default:f(()=>[d(M,{type:"button",icon:"pi pi-shopping-cart",severity:"contrast",variant:"text",rounded:""})]),_:1})):(l(),V(M,{key:1,type:"button",icon:"pi pi-shopping-cart",severity:"contrast",variant:"text",rounded:""}))]),_:1}),d(M,{type:"button",icon:"pi pi-ellipsis-v","aria-haspopup":"true","aria-controls":"overlay_menu",severity:"contrast",variant:"text",rounded:"",class:"otherMenusBtn",onClick:D}),d(ee,{id:"overlay_menu",ref_key:"otherMenusDom",ref:i,model:c.value,popup:!0},{item:f(({item:p,props:C})=>[p.route?(l(),V(O,{key:0,to:p.route,custom:"",prefetch:""},{default:f(({href:B,navigate:k})=>[y("a",P({href:B},C.action,{onClick:k}),[y("span",wt,T(p.label),1),$.value&&p.label=="未完成的訂單"?(l(),V(Q,{key:0,value:$.value,severity:"danger",size:"small"},null,8,["value"])):j("",!0)],16,bt)]),_:2},1032,["to"])):(l(),h("a",P({key:1},C.action,{onClick:x}),[y("span",null,T(p.label),1),r.value=="淺色"?(l(),h("i",Lt)):(l(),h("i",St))],16))]),_:1},8,["model"])])]),_:1},8,["model"])],2)}}},Ct=I($t,[["__scopeId","data-v-ae775e91"]]),Et={__name:"GoTop",setup(e){const o=u(null);Y(()=>{o.value=document.querySelector(".go-top"),window.addEventListener("scroll",t)}),X(()=>{window.removeEventListener("scroll",t)});const t=()=>{window.scrollY>200?o.value.classList.add("scrolled"):o.value.classList.remove("scrolled")},a=()=>{window.scrollTo(0,0)};return(r,n)=>{const s=_("VIcon");return l(),h("div",{class:"go-top text-secondary hvr-sink",onClick:a},[d(s,{icon:["fas","angle-up"],class:"text-center"}),n[0]||(n[0]=y("small",null,"TOP",-1))])}}},Ot=I(Et,[["__scopeId","data-v-c9161d16"]]),kt={},Pt={class:"spinWrapper"};function Tt(e,o){const t=_("VProgressSpinner");return l(),h("div",Pt,[d(t,{fill:"transparent","animation-duration":".5s"})])}const At=I(kt,[["render",Tt],["__scopeId","data-v-84eabaa5"]]),It={};function Dt(e,o){const t=_("VToast");return l(),V(t,{breakpoints:{"414px":{width:"100%",right:"0",left:"0"}}})}const xt=I(It,[["render",Dt]]),Mt={__name:"App",setup(e){const o=F(),t=Ce(),a=H(()=>t.path==="/"?"":"border-bottom");return(r,n)=>{const s=Ct,i=_("router-view");return l(),h(le,null,[ne(d(At,null,null,512),[[ae,ce(o).isLoading]]),d(xt),d(s,{"root-class":a.value},null,8,["root-class"]),d(i,null,{default:f(({Component:c})=>[(l(),V(ie(c)))]),_:1}),d(Ot)],64)}}};function Bt(){Je.init({once:!1})}function Rt(e){e.use(ke,{theme:{preset:Pe,options:{darkModeSelector:".dark-mode"}}}),e.use(Te),e.component("VButton",Ae),e.component("VMenubar",Ie),e.component("VOverlayBadge",De),e.component("VBadge",xe),e.component("VMenu",Me),e.component("VCard",Be),e.component("VTag",Re),e.component("VProgressSpinner",qe),e.component("VToast",Fe),e.component("VInputText",Ne),e.component("VInputNumber",ze),e.component("VInputGroup",Ue),e.component("VInputGroupAddon",je),e.component("VSelect",Ge),e.component("VBreadcrumb",We),e.component("VFloatLabel",He),e.component("VAccordion",Ye),e.component("VAccordionPanel",Xe),e.component("VAccordionHeader",Ze),e.component("VAccordionContent",Ke)}S("required",at);S("email",ct);S("min",it);S("max",lt);S("numeric",ut);S("onlyChinese",e=>/^[\u4e00-\u9fa5]+$/.test(e)?!0:"請輸入中文");Qe({generateMessage:et({zh_TW:nt}),validateOnInput:!0});tt("zh_TW");function qt(e){e.component("VField",ot),e.component("VForm",rt),e.component("ErrorMessage",st)}dt.add(ue,de,me,pe,fe,_e,ge,he,ve,ye);function Ft(e){e.component("VIcon",mt)}const b=Ve(Mt),Nt=be();b.use(Z);b.use(K);b.use(Nt);Bt();Rt(b);qt(b);Ft(b);b.mount("#app");export{I as _,L as a,F as b,gt as c,yt as d,vt as u};
