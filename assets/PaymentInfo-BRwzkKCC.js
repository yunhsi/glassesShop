import{aU as u,bj as _,f as h,a8 as x,T as r,U as n,V as t,Y as d,aN as p,ae as g,aa as k,aI as w,ap as v,ac as P,X as S}from"./vendor-BIQa9CGr.js";import{a as C,b as B,_ as $,c as D}from"./index-CSIRHjw9.js";import{d as T}from"./pinia-CnnC1SPs.js";function I(s){const o=new Date(s*1e3);return`${o.getFullYear()}-${o.getMonth()+1}-${o.getDate()} ${o.getHours()}:${o.getMinutes()}`}const N={postPay(s){return C.post(`/pay/${s}`).then(o=>o.data)}},V=T("usePay",()=>{const s=B();return{postPay:async l=>{s.isLoading=!0;try{const a=await N.postPay(l);u.fire({icon:"success",title:`${a.message}`,showConfirmButton:!1,timer:1500})}catch(a){u.fire({icon:"error",title:`${a.message}`})}finally{s.isLoading=!1}}}}),M={class:"border border-danger p-4 rounded custom-shadow mt-4 mt-md-0"},j={class:"pb-2",style:{"font-size":"12px",display:"block"}},q={class:"border-bottom"},z={class:"text-end border-0 px-0"},L={class:"border-bottom"},U={class:"text-end border-0 px-0"},Y={class:"border-bottom"},A={class:"text-end border-0 px-0"},E={class:"border-bottom"},F={class:"text-end border-0 px-0"},H={class:"border-bottom"},O={class:"text-end border-0 px-0"},R={key:0,class:"badge rounded-pill bg-success"},X={key:1,class:"badge rounded-pill bg-secondary"},G={key:0,class:"d-grid gap-2"},J={key:1,class:"d-grid gap-2"},K={__name:"PaymentInfo",props:{id:{type:String,required:!0},order:{type:Object,default:()=>({})},isPaid:{type:Boolean,default:!1}},setup(s){const o=_(),l=D(),a=V(),c=s,i=h(()=>c.order.user),b=()=>{u.fire({title:"是否確定結帳?",icon:"question",showCancelButton:!0,confirmButtonColor:"#dc3534",cancelButtonText:"取消",confirmButtonText:"是的！"}).then(m=>{m.isConfirmed&&f()})},f=async()=>{await a.postPay(c.id),o.push(`/checkout/${c.id}`)};return(m,e)=>{const y=x("router-link");return r(),n("div",M,[e[6]||(e[6]=t("h4",{class:"mb-1"},"訂購資訊",-1)),t("small",j," 建立時間："+d(p(I)(s.order.create_at)),1),t("table",{class:g(["table mb-4 small",{"table-dark":p(l).isDarkMode}])},[t("tbody",null,[t("tr",q,[e[0]||(e[0]=t("th",{class:"border-0 px-0 fw-normal"},"收件人姓名",-1)),t("td",z,d(i.value.name),1)]),t("tr",L,[e[1]||(e[1]=t("th",{class:"border-0 px-0 fw-normal"},"收件人電話",-1)),t("td",U,d(i.value.tel),1)]),t("tr",Y,[e[2]||(e[2]=t("th",{class:"border-0 px-0 fw-normal"},"收件人地址",-1)),t("td",A,d(i.value.address),1)]),t("tr",E,[e[3]||(e[3]=t("th",{class:"border-0 px-0 fw-normal"},"付款方式",-1)),t("td",F,d(i.value.payment),1)]),t("tr",H,[e[4]||(e[4]=t("th",{class:"border-0 px-0 fw-normal"},"付款狀態",-1)),t("td",O,[s.order.is_paid?(r(),n("span",R,"付款完成")):(r(),n("span",X,"尚未付款"))])])])],2),k(t("div",null,[s.order.is_paid?(r(),n("div",J,[v(y,{to:"/products",class:"btn btn-danger",prefetch:""},{default:P(()=>e[5]||(e[5]=[S("回到商品頁")])),_:1})])):(r(),n("div",G,[t("button",{type:"button",class:"btn btn-danger",onClick:b},"結帳去")]))],512),[[w,!s.isPaid]])])}}},tt=$(K,[["__scopeId","data-v-69b65843"]]);export{tt as P};
