import{r as b,w as V,x as E,bb as k,U as C,V as a,ap as l,X as o,Y as S,aN as w,ac as p,bj as D,a8 as u,T as U,ae as c}from"./vendor-BUxCYPUO.js";import{C as q}from"./CheckoutSteps-bjcjEBoh.js";import{O as I}from"./OrderInfo-CuYW77JF.js";import{u as M,d as O}from"./index-BX0knjW9.js";import"./pinia-Do-HvM91.js";import"./axios-DWwaMX5J.js";import"./primevue--IhQ8n2h.js";import"./vee-validate-B-F8cbDQ.js";const F={style:{"padding-top":"70px","min-height":"calc(100vh - 104px)"}},N={class:"container pt-4 pb-5"},T={class:"row flex-row-reverse justify-content-center pt-4"},h={class:"col-lg-5 col-md-6"},j={class:"col-lg-7 col-md-6"},A={class:"col-md-6"},B={class:"col-md-6"},R={class:"col-12"},z={class:"col-12"},G={class:"col-12"},H={class:"col-12 d-flex justify-content-between align-items-center"},ee={__name:"Step2",setup(W){const r=M(),v=O(),n=b(),f=D(),s=b({user:{name:"",tel:"",address:"",email:"",payment:""}}),g=async()=>{await v.createOrder(s.value),f.push(`/order/${v.orderId}`),localStorage.setItem("isGetCoupon",!1),r.getCarts()};return V(n,()=>{n.value.carts.length||f.push("/cart")}),V(r,()=>{n.value=r.carsData}),E(()=>{n.value=r.carsData}),k({title:"建立訂單｜!WEAR"}),(X,e)=>{const d=u("VField"),i=u("ErrorMessage"),x=u("VIcon"),_=u("router-link"),y=u("VForm");return U(),C("main",F,[a("div",N,[l(q,{step:"2"}),a("div",T,[a("div",h,[l(I,{title:"訂單資訊",cart:n.value},null,8,["cart"]),o(" "+S(w(r).cartsData),1)]),a("div",j,[l(y,{class:"row g-3 pt-4 pt-md-0 small",onSubmit:g},{default:p(({errors:m})=>[a("div",A,[e[5]||(e[5]=a("label",{for:"name",class:"form-label"},[o(" 收件人姓名 "),a("span",{class:"text-danger"},"*")],-1)),l(d,{id:"name",modelValue:s.value.user.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.user.name=t),type:"text",name:"姓名",placeholder:"請輸入收件人姓名",class:c(["form-control",{"is-invalid":m.姓名}]),rules:"required|onlyChinese"},null,8,["modelValue","class"]),l(i,{name:"姓名",class:"invalid-feedback"})]),a("div",B,[e[6]||(e[6]=a("label",{for:"tel",class:"form-label"},[o(" 收件人電話 "),a("span",{class:"text-danger"},"*")],-1)),l(d,{id:"tel",modelValue:s.value.user.tel,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.user.tel=t),type:"tel",name:"電話",placeholder:"請輸入收件人電話",class:c(["form-control",{"is-invalid":m.電話}]),rules:"required|numeric|min:10|max:10"},null,8,["modelValue","class"]),l(i,{name:"電話",class:"invalid-feedback"})]),a("div",R,[e[7]||(e[7]=a("label",{for:"address",class:"form-label"},[o(" 收件人地址 "),a("span",{class:"text-danger"},"*")],-1)),l(d,{id:"address",modelValue:s.value.user.address,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.user.address=t),type:"text",name:"地址",placeholder:"請輸入收件人地址",class:c(["form-control",{"is-invalid":m.地址}]),rules:"required"},null,8,["modelValue","class"]),l(i,{name:"地址",class:"invalid-feedback"})]),a("div",z,[e[8]||(e[8]=a("label",{for:"Email",class:"form-label"},[o(" Email (請填寫常用信箱以追蹤出貨狀態) "),a("span",{class:"text-danger"},"*")],-1)),l(d,{id:"Email",modelValue:s.value.user.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.user.email=t),type:"email",name:"Email",placeholder:"請輸入 Email",class:c(["form-control",{"is-invalid":m.Email}]),rules:"required|email"},null,8,["modelValue","class"]),l(i,{name:"Email",class:"invalid-feedback"})]),a("div",G,[e[10]||(e[10]=a("label",{for:"payment",class:"form-label"},[o(" 付款方式 "),a("span",{class:"text-danger"},"*")],-1)),l(d,{id:"payment",modelValue:s.value.user.payment,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.user.payment=t),as:"select",name:"付款方式",placeholder:"請輸入付款方式",class:c(["form-select",{"is-invalid":m.付款方式}]),rules:"required"},{default:p(()=>e[9]||(e[9]=[a("option",{value:"",selected:"",disabled:""},"選擇付款方式",-1),a("option",{value:"信用卡"},"信用卡",-1),a("option",{value:"貨到付款"},"貨到付款",-1),a("option",{value:"ATM 匯款"},"ATM 匯款",-1)])),_:2},1032,["modelValue","class"]),l(i,{name:"付款方式",class:"invalid-feedback"})]),a("div",H,[l(_,{to:"/cart",prefetch:""},{default:p(()=>[l(x,{icon:["fas","chevron-left"]}),e[11]||(e[11]=o(" 返回購物車 "))]),_:1}),e[12]||(e[12]=a("button",{type:"submit",class:"btn btn-danger px-3"},"建立訂單",-1))])]),_:1})])])])])}}};export{ee as default};
